<html>
	<head>
		<title>Hardware configuration</title>
    <link rel="stylesheet" href="style.css" type="text/css">
	</head>
	<body>
    <table>
      <tr>
        <td>Userland version:</td>
        <td id="userlandVersion">...unknown...</td>
      </tr>
      <tr>
        <td>Imager ID:</td>
        <td id="imagerID">...unknown...</td>
      </tr>
    </table>
        <div>
            Log<br>
            <textarea id="logTxt" name="log text" cols="80" rows="20"></textarea><br>
            <input type="button" value="refresh log" id="getLog">
        </div>
    <br>
    <br><a href="index.html">View</a>
        <a href="debug.html">Debug</a>

	</body>

  <script type="module">
        import { NimbusRPC } from './nimbusRPC.js';
        
        var n = new NimbusRPC(location.host);
        var logBut = document.getElementById("getLog");

        n.getUserlandVersion().then(
                function(val) {
                    document.getElementById("userlandVersion").innerHTML=val;
                },
                function(status) {
                    console.log(status);
                });
                
        n.getIdent().then(
                function(val) {
                    document.getElementById("imagerID").innerHTML=val;
                },
                function(status) {
                    console.log(status);
                });
       n.getLog().then(
                function(val) {
                    document.getElementById("logTxt").innerHTML = val;
                },
                function(status) {
                    document.getElementById("logTxt").innerHTML = "Error: "+status; 
                });
               
        logBut.onclick = function(){
            n.getLog().then(
                function(val) {
                    document.getElementById("logTxt").innerHTML = val;
                },
                function(status) {
                    document.getElementById("logTxt").innerHTML = "Error: "+status; 
                });
        };


    </script>
</html>
